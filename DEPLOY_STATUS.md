# üöÄ BioMarket ‚Äî –°—Ç–∞—Ç—É—Å –î–µ–ø–ª–æ—è –∏ –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏

**–î–∞—Ç–∞:** 2026-02-25  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë—ç–∫–µ–Ω–¥ –≥–æ—Ç–æ–≤, üîß –§—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Äî –±–∞–≥ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π

---

## ‚úÖ –ß–¢–û –°–î–ï–õ–ê–ù–û

### 1. –ë—ç–∫–µ–Ω–¥ (Railway)
- [x] Express —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
- [x] PostgreSQL –ø–æ–¥–∫–ª—é—á—ë–Ω (Railway)
- [x] Prisma —Å—Ö–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∞
- [x] Endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:
  - `POST /api/auth/register` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  - `POST /api/auth/login` ‚Äî –ª–æ–≥–∏–Ω
  - `POST /api/auth/logout` ‚Äî logout
  - `GET /api/auth/me` ‚Äî —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
  - `GET/PUT/DELETE /api/users/profile` ‚Äî –ø—Ä–æ—Ñ–∏–ª—å (GDPR)
  - `GET/POST /api/orders` ‚Äî –∑–∞–∫–∞–∑—ã
  - `GET/POST /api/subscriptions` ‚Äî –ø–æ–¥–ø–∏—Å–∫–∏
  - `GET/POST /api/payments` ‚Äî –ø–ª–∞—Ç–µ–∂–∏ (mock)
- [x] JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [x] CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è Vercel
- [x] –ß–µ—à—Å–∫–∏–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã (—Ç–µ–ª–µ—Ñ–æ–Ω, PSƒå)
- [x] –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å Europe/Prague

**Railway URL:** `https://biomark-web-production.up.railway.app`  
**Health check:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

---

### 2. –§—Ä–æ–Ω—Ç–µ–Ω–¥ (Vercel)
- [x] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ —Å–æ–∑–¥–∞–Ω–∞:
  - `api.js` ‚Äî HTTP –∫–ª–∏–µ–Ω—Ç (mock/real —Ä–µ–∂–∏–º—ã)
  - `authService.js` ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
  - `userService.js` ‚Äî –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `orderService.js` ‚Äî –∑–∞–∫–∞–∑—ã
  - `subscriptionService.js` ‚Äî –ø–æ–¥–ø–∏—Å–∫–∏
  - `paymentService.js` ‚Äî –ø–ª–∞—Ç–µ–∂–∏
  - `stripe.js` ‚Äî Stripe Elements
- [x] `date-fns` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [x] –î–µ–º–æ-–ª–æ–≥–∏–Ω —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [x] –ö–Ω–æ–ø–∫–∞ "–í–æ–π—Ç–∏" –≤ —Ö–µ–¥–µ—Ä–µ
- [x] –ö–æ—Ä–∑–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –ì–∞–º–±—É—Ä–≥–µ—Ä –º–µ–Ω—é —Ä–∞–±–æ—Ç–∞–µ—Ç

**Vercel URL:** `https://biomark-web.vercel.app`

---

## üîß –ß–¢–û –¢–†–ï–ë–£–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –ö—Ä–∏—Ç–∏—á–Ω—ã–π –±–∞–≥: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ –¥–µ–º–æ-—É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (`admin@admin.com` / `admin@`) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ä–∞–∑—É —Ä–∞–∑–ª–æ–≥–∏–Ω–∏–≤–∞–µ—Ç—Å—è.

**–°–∏–º–ø—Ç–æ–º—ã:**
1. `handleSuccessfulLogin()` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ sessionStorage
2. –ü–æ—Å–ª–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ sessionStorage –ø—É—Å—Ç–æ–π
3. `authManager.getUser()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`

**–ì–¥–µ –∏—Å–∫–∞—Ç—å:**
- `src/js/register.js` ‚Äî `handleSuccessfulLogin()`, `handleLogin()`
- `src/js/modules/auth.js` ‚Äî `getUser()`, `getUserRole()`, `isAuthenticated()`
- `src/js/services/api.js` ‚Äî `getUserFromToken()`, `getStoredToken()`

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ sessionStorage –ø–µ—Ä–µ–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º?
2. –û—á–∏—â–∞–µ—Ç—Å—è –ª–∏ sessionStorage –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏?
3. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ª–∏ –∫–ª—é—á–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è?

**–í–æ–∑–º–æ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ `sessionStorage` –Ω–µ –æ—á–∏—â–∞–µ—Ç—Å—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ª–æ–≥–æ–≤ –≤ `handleSuccessfulLogin()`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ `authManager.getUserSync()` –ø—Ä–∞–≤–∏–ª—å–Ω–æ —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

---

## üìã –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò (—Å –º–∞–∫–±—É–∫–∞)

### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (–∫—Ä–∏—Ç–∏—á–Ω–æ)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
cd e:\Projects\Farm
npm run dev

cd server
npm run dev
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å (F12)
2. –í–æ–π—Ç–∏ —Å –¥–µ–º–æ-—É—á—ë—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
3. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ `handleSuccessfulLogin`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å sessionStorage –¥–æ –∏ –ø–æ—Å–ª–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞

**–ò—Å–ø—Ä–∞–≤–∏—Ç—å:**
- –ï—Å–ª–∏ sessionStorage –æ—á–∏—â–∞–µ—Ç—Å—è ‚Äî –Ω–∞–π—Ç–∏ –≥–¥–µ
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ —á–∏—Ç–∞—é—Ç—Å—è ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–ª—é—á–∏
- –î–æ–±–∞–≤–∏—Ç—å `console.log` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

### 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª

- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –õ–æ–≥–∏–Ω (–¥–µ–º–æ –∏ —Ä–µ–∞–ª—å–Ω—ã–π —á–µ—Ä–µ–∑ API)
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è (member-dashboard)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- [ ] –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- [ ] Logout

---

### 3. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API

**Vercel Environment Variables:**

| Key | Value |
|-----|-------|
| `VITE_API_MODE` | `real` |
| `VITE_API_URL` | `https://biomark-web-production.up.railway.app` |
| `VITE_ENABLE_DEMO_LOGIN` | `false` (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞) |

**–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è:**
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ Railway API
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–Ω —á–µ—Ä–µ–∑ Railway API
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ JWT —Ç–æ–∫–µ–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç

---

### 4. –§–∏–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] CORS —Ä–∞–±–æ—Ç–∞–µ—Ç (Railway ‚Üí Vercel)
- [ ] JWT_SECRET –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- [ ] DATABASE_URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- [ ] –í—Å–µ endpoints –æ—Ç–≤–µ—á–∞—é—Ç
- [ ] –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üîê –ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø

### Railway (–±—ç–∫–µ–Ω–¥):
```
DATABASE_URL=postgresql://postgres:DboyClMEhnLpASMOjAwkWhQeZoPIOJSX@postgres.railway.internal:5432/railway
JWT_SECRET=a7b850121ef654e9253e87b9e5aa20d66ed0cc53998fd387b1f4ec52cd8510ac
NODE_ENV=production
FRONTEND_URL=https://biomark-web.vercel.app
PORT=8080 (Railway —Å—Ç–∞–≤–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

### Vercel (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥):
```
VITE_API_MODE=real
VITE_API_URL=https://biomark-web-production.up.railway.app
VITE_ENABLE_DEMO_LOGIN=false
```

### –õ–æ–∫–∞–ª—å–Ω–æ (`.env`):
```
VITE_API_MODE=mock
VITE_API_URL=http://localhost:3000
VITE_ENABLE_DEMO_LOGIN=true
```

---

## üìä –°–¢–ê–¢–£–° –ü–†–û–ï–ö–¢–ê

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å |
|-----------|--------|------------|
| **–ë—ç–∫–µ–Ω–¥ API** | ‚úÖ –ì–æ—Ç–æ–≤ | 100% |
| **PostgreSQL** | ‚úÖ –ü–æ–¥–∫–ª—é—á—ë–Ω | 100% |
| **JWT Auth** | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ | 100% |
| **–§—Ä–æ–Ω—Ç–µ–Ω–¥ UI** | ‚úÖ –ì–æ—Ç–æ–≤ | 95% |
| **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** | üîß –ë–∞–≥ | 80% |
| **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** | ‚è≥ –ñ–¥—ë—Ç | 70% |
| **–¢–µ—Å—Ç—ã** | ‚ùå –ù–µ—Ç | 0% |

**–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ~85%

---

## üêõ –ò–ó–í–ï–°–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–∑–ª–æ–≥–∏–Ω–∏–≤–∞–µ—Ç —Å—Ä–∞–∑—É** ‚Äî sessionStorage –æ—á–∏—â–∞–µ—Ç—Å—è
2. **Vite –∫—ç—à–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã** ‚Äî –Ω—É–∂–µ–Ω hard refresh (Ctrl+Shift+R)
3. **–ú–Ω–æ–≥–æ node –ø—Ä–æ—Ü–µ—Å—Å–æ–≤** ‚Äî –∏–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å `taskkill /F /IM node.exe`

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ (–ª–æ–∫–∞–ª—å–Ω–æ)

```bash
# –û–∫–Ω–æ 1 ‚Äî –§—Ä–æ–Ω—Ç–µ–Ω–¥
cd e:\Projects\Farm
npm run dev

# –û–∫–Ω–æ 2 ‚Äî –ë—ç–∫–µ–Ω–¥
cd e:\Projects\Farm\server
npm run dev
```

**–û—Ç–∫—Ä—ã—Ç—å:** http://localhost:5173

**–î–µ–º–æ-—É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- Email: `admin@admin.com`
- –ü–∞—Ä–æ–ª—å: `admin@`

---

## üìù –ó–ê–ú–ï–¢–ö–ò

- **date-fns** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏
- **sessionStorage** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤ (–Ω–µ localStorage)
- **CSP** –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **–ß–µ—à—Å–∫–∏–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã** —Ä–∞–±–æ—Ç–∞—é—Ç (—Ç–µ–ª–µ—Ñ–æ–Ω, PSƒå)
- **GDPR endpoints** —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

---

**–ì–æ—Ç–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤—Ä–µ–º—è!** üöÄ
